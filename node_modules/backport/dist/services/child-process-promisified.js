"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.execAsCallback = exports.exec = void 0;
const child_process_1 = __importDefault(require("child_process"));
const util_1 = require("util");
const logger_1 = require("./logger");
async function exec(cmd, options) {
    const execPromisified = util_1.promisify(child_process_1.default.exec);
    try {
        const res = await execPromisified(cmd, {
            maxBuffer: 100 * 1024 * 1024,
            ...options,
        });
        logger_1.logger.verbose(`exec success '${cmd}':`, res);
        return res;
    }
    catch (e) {
        logger_1.logger.info(`exec error '${cmd}':`, e);
        throw e;
    }
}
exports.exec = exec;
exports.execAsCallback = (...args) => {
    return child_process_1.default.exec(...args);
};
