"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getDevAccessToken = void 0;
const fs_1 = require("fs");
// get global config: either from .backport/config.json or via env variables
async function getDevAccessToken() {
    const accessToken = process.env.accessToken;
    // get accessToken from env vars
    if (accessToken) {
        return accessToken;
    }
    // get credentials from config file
    const accessTokenFile = './src/test/private/accessToken.txt';
    try {
        const accessToken = await fs_1.promises.readFile(accessTokenFile, {
            encoding: 'utf-8',
        });
        return accessToken.trim();
    }
    catch (e) {
        throw new Error(`Missing username or accessToken in "${accessTokenFile}"`);
    }
}
exports.getDevAccessToken = getDevAccessToken;
